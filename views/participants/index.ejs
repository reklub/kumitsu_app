<% layout('./layouts/boilerplate') %>

<style>
    body {
        background-color: #f5f7fa;
    }
    
    .participants-container {
        max-width: 1000px;
        margin: 0 auto;
        padding: 20px 0;
    }
    
    .page-header {
        background: linear-gradient(135deg, #0d6efd 0%, #0dcaf0 100%);
        color: #ffffff;
        padding: 30px 0;
        margin-bottom: 30px;
        border-radius: 8px;
        box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
    }
    
    .page-header h1 {
        margin-bottom: 5px;
        font-size: 2rem;
    }
    
    .page-header p {
        margin-bottom: 0;
        opacity: 0.95;
    }
    
    .card {
        border: none;
        box-shadow: 0 2px 8px rgba(0, 0, 0, 0.08);
        border-radius: 8px;
        margin-bottom: 25px;
    }
    
    .card-header {
        background-color: #0d6efd;
        color: #ffffff;
        border-radius: 8px 8px 0 0 !important;
        padding: 1.25rem;
        font-weight: 600;
        border: none;
    }
    
    .card-header i {
        margin-right: 8px;
    }
    
    .card-body {
        padding: 25px;
    }
    
    .empty-state {
        text-align: center;
        padding: 40px 20px;
    }
    
    .empty-state i {
        font-size: 3rem;
        color: #ccc;
        margin-bottom: 15px;
        display: block;
    }
    
    .empty-state p {
        color: #666;
        font-size: 1.1rem;
        margin-bottom: 20px;
    }
    
    .table-container {
        overflow-x: auto;
    }
    
    .table {
        margin-bottom: 0;
    }
    
    .table th {
        background-color: #f8f9fa;
        border-bottom: 2px solid #dee2e6;
        color: #333;
        font-weight: 600;
        padding: 15px;
    }
    
    .table td {
        padding: 15px;
        vertical-align: middle;
        border-color: #dee2e6;
    }
    
    .table tbody tr:hover {
        background-color: #f8f9fa;
    }
    
    .action-buttons {
        display: grid;
        grid-template-columns: 1fr 1fr 1fr;
        gap: 12px;
        margin-top: 25px;
    }
    
    .btn-primary-custom {
        background: linear-gradient(135deg, #0d6efd 0%, #0dcaf0 100%);
        border: none;
        color: white;
        padding: 12px 20px;
        font-weight: 600;
        border-radius: 6px;
        transition: transform 0.2s, box-shadow 0.2s;
        text-decoration: none;
        display: inline-block;
        text-align: center;
    }
    
    .btn-primary-custom:hover {
        transform: translateY(-2px);
        box-shadow: 0 8px 16px rgba(13, 110, 253, 0.12);
        color: white;
        text-decoration: none;
    }
    
    .btn-success-custom {
        background-color: #0d6efd;
        border: none;
        color: white;
        padding: 12px 20px;
        font-weight: 600;
        border-radius: 6px;
        transition: transform 0.2s, box-shadow 0.2s;
        text-decoration: none;
        display: inline-block;
        text-align: center;
    }
    
    .btn-success-custom:hover {
        background-color: #0b5ed7;
        transform: translateY(-2px);
        box-shadow: 0 8px 16px rgba(13, 110, 253, 0.12);
        color: white;
        text-decoration: none;
    }
    
    .btn-secondary-custom {
        background-color: #e9ecef;
        border: none;
        color: #333;
        padding: 12px 20px;
        font-weight: 600;
        border-radius: 6px;
        transition: all 0.2s;
        text-decoration: none;
        display: inline-block;
        text-align: center;
    }
    
    .btn-secondary-custom:hover {
        background-color: #dee2e6;
        color: #333;
        text-decoration: none;
        transform: translateY(-2px);
    }
    
    .badge-status {
        padding: 6px 12px;
        border-radius: 20px;
        font-size: 0.875rem;
        font-weight: 500;
    }

    .badge-assigned {
        background-color: #e6fff5;
        color: #0b5e49;
    }

    .badge-unassigned {
        background-color: #fff3f2;
        color: #6f1d1b;
    }
    
    .participants-count {
        background-color: #f8f9fa;
        padding: 10px 15px;
        border-radius: 6px;
        display: inline-block;
        margin-bottom: 15px;
    }
    
    @media (max-width: 768px) {
        .page-header {
            padding: 20px 0;
        }
        
        .page-header h1 {
            font-size: 1.5rem;
        }
        
        .action-buttons {
            grid-template-columns: 1fr;
        }
        
        .table th {
            padding: 10px;
            font-size: 0.875rem;
        }
        
        .table td {
            padding: 10px;
            font-size: 0.875rem;
        }
    }
</style>

<div class="participants-container">
    <!-- Page Header -->
    <div class="page-header">
        <div class="container-fluid">
            <h1><i class="fas fa-users"></i> Zawodnicy</h1>
            <p><strong><%= club.clubName %></strong> â€¢ <strong><%= tournament.name %></strong></p>
        </div>
    </div>

    <!-- Participants Card -->
    <div class="card">
        <div class="card-header">
            <i class="fas fa-list"></i> Registered Participants
        </div>
        <div class="card-body">
            <% if(participants.length > 0) { %>
                <div class="participants-count">
                    <strong><%= participants.length %></strong> participant<%= participants.length !== 1 ? 's' : '' %>
                </div>
                
                <div class="table-container">
                    <table class="table">
                        <thead>
                            <tr>
                                <th>Name</th>
                                <th>Gender</th>
                                <th>Age</th>
                                <th>Weight</th>
                                <th>Belt Rank</th>
                                <th>Category</th>
                            </tr>
                        </thead>
                        <tbody>
                            <% participants.forEach(participant => { %>
                                <tr>
                                    <td><strong><%= participant.firstName %> <%= participant.lastName %></strong></td>
                                    <td><%= getGenderText(participant.gender) %></td>
                                    <td><%= calculateAge(participant.dateOfBirth) %> years</td>
                                    <td><%= participant.weight %> kg</td>
                                    <td>
                                        <% if (participant.beltRank) { %>
                                            <span class="badge" style="background-color: #0d6efd;">
                                                <%= participant.beltRank.rank %>
                                            </span>
                                        <% } else { %>
                                            <span class="text-muted">N/A</span>
                                        <% } %>
                                    </td>
                                    <td>
                                        <% if (participant.category) { %>
                                            <span class="badge-status badge-assigned">
                                                <i class="fas fa-check"></i> Assigned
                                            </span>
                                        <% } else { %>
                                            <span class="badge-status badge-unassigned">
                                                <i class="fas fa-clock"></i> Not assigned
                                            </span>
                                        <% } %>
                                    </td>
                                </tr>
                            <% }); %>
                        </tbody>
                    </table>
                </div>
            <% } else { %>
                <div class="empty-state">
                    <i class="fas fa-user-plus"></i>
                    <p>No participants registered yet</p>
                    <small class="text-muted">Start by adding participants below</small>
                </div>
            <% } %>
        </div>
    </div>

    <!-- Action Buttons -->
    <div class="action-buttons">
        <a href="/tournaments/<%= tournament._id %>/club/<%= club._id %>/add-participant" class="btn-primary-custom">
            <i class="fas fa-user-plus"></i> Add Participant
        </a>
        <a href="/tournaments/<%= tournament._id %>/club/<%= club._id %>/batch-upload" class="btn-success-custom">
            <i class="fas fa-file-csv"></i> Batch Upload
        </a>
        <a href="/tournaments/<%= tournament._id %>" class="btn-secondary-custom">
            <i class="fas fa-arrow-left"></i> Back
        </a>
    </div>
</div>
</body>
</html>